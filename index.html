<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Terra Numerica - Atelier Graphes</title>
  <script src="https://unpkg.com/cytoscape@3.26.0/dist/cytoscape.min.js"></script>
  <link rel="stylesheet" href="style.css">
</head>

<body>

  <header id="tn-header">
    <div class="tn-container">
      <div class="tn-logo">
        <img src="public/terra_numerica_logo.png" alt="Terra Numerica">
      </div>
      <nav class="tn-nav">
        <a href="#" class="active">L'Atelier Graphes</a>
        <a href="https://terra-numerica.org/" target="_blank">Retour au site</a>
      </nav>
    </div>
  </header>

  <main class="grid">
    <section id="zone-3">
      <div>
        <h1>Consignes</h1>
        <p>
          Choisis un <strong>mode</strong> : <em>Personnalis√©</em> ou <em>Niveaux</em>.<br>
          Cr√©ez, modifiez et explorez les graphes k-partites.
        </p>
      </div>
      <div id="zone-4">
        <button class="info-btn" id="openHelp" aria-label="Informations">i</button>
      </div>
    </section>

    <section id="zone-1" aria-label="Zone graphe">
      <div id="cy" role="application" aria-label="Graphe Cytoscape"></div>
    </section>

    <aside id="zone-2" aria-label="Panneau de contr√¥le">
      <div class="card">
        <h3>Mode</h3>
        <div class="row">
          <select id="mode" style="width:100%">
            <option value="editor" selected>√âditeur de graphe</option>
            <option value="levels">Niveaux</option>
            <option value="templates">Templates</option>
          </select>
        </div>

        <div id="editor-controls" class="editor-panel">
          <h3>Cr√©ation</h3>
          <div class="row gap-sm">
            <input type="number" id="nodePart" min="1" max="10" value="1" style="width:50px" title="Num√©ro de partie">
            <input type="text" id="nodeLabel" placeholder="Nom du n≈ìud" style="flex:1">
          </div>
          <button class="primary" id="btnAddNode" style="width:100%; margin-top:8px">Ajouter un n≈ìud</button>

          <h3>Fichier</h3>
          <div class="row" style="gap:6px">
            <button class="secondary" id="btnExportJSON" style="flex:1">Exporter</button>
            <button class="secondary" id="btnImportJSON" style="flex:1">Importer</button>
          </div>
          <input type="file" id="fileInput" accept=".json" style="display:none">

          <div class="row" style="margin-top:10px">
            <button class="ghost" id="btnClear" style="width:100%">Tout effacer</button>
          </div>
        </div>

        <div id="level-controls" class="hidden" style="margin-top:10px">
          <h3>Choix du niveau</h3>
          <select id="level" style="width:100%; margin-bottom:8px"></select>
          <button class="primary" id="btnLoadLevel" style="width:100%">Charger le niveau</button>
        </div>

        <div id="template-controls" class="hidden" style="margin-top:10px">
          <h3>Choix du mod√®le</h3>
          <select id="template" style="width:100%; margin-bottom:8px">
            <option value="">-- S√©lectionner --</option>
            <option value="bipartite_3_3">Bipartite K‚ÇÇ,‚ÇÉ</option>
            <option value="tripartite_2_2_2">Tripartite 2-2-2</option>
            <option value="star_5">√âtoile √† 5 branches</option>
            <option value="cycle_6">Cycle de 6 n≈ìuds</option>
            <option value="complete_4">Complet K‚ÇÑ</option>
          </select>
          <button class="primary" id="btnLoadTemplate" style="width:100%">Charger le mod√®le</button>
        </div>
      </div>

      <div class="card">
        <h3>Outils</h3>
        <p id="stats" class="hint" style="margin-bottom:10px; text-align:center">‚Äî</p>

        <div class="row" style="margin-bottom:8px">
          <button id="btnEdgeColor" class="color-cycle color-grey" style="width:100%">Couleur : Gris</button>
        </div>

        <button class="ghost" id="btnPotential" style="width:100%; margin-bottom:8px">Voir ar√™tes possibles</button>

        <div class="row">
          <button id="btnLayout" class="ghost" style="flex:1">R√©organiser</button>
          <button id="btnFit" class="ghost" style="flex:1">Centrer</button>
        </div>

        <div class="row" style="margin-top:15px">
          <button id="btnDeleteNode" class="danger" style="width:100%">Supprimer la s√©lection</button>
        </div>
        <button id="btnRandom" style="display:none"></button>
      </div>
    </aside>
  </main>

  <dialog id="help">
    <div class="modal-header">
      <strong>Guide d'utilisation</strong>
      <button class="info-btn" id="closeHelp" aria-label="Fermer"
        style="background:transparent; border:1px solid white;">√ó</button>
    </div>
    <div class="modal-body">
      <h3>üé® Modes disponibles</h3>
      <p><strong>√âditeur :</strong> Cr√©ez vos graphes. <strong>Niveaux :</strong> R√©solvez des √©nigmes.
        <strong>Templates :</strong> Mod√®les pr√™ts √† l'emploi.</p>
      <h3>‚úèÔ∏è Actions</h3>
      <p>
        <strong>Cr√©er ar√™te :</strong> Cliquez sur deux n≈ìuds.<br>
        <strong>Supprimer :</strong> Double-clic sur une ar√™te ou bouton "Supprimer" pour un n≈ìud.<br>
        <strong>Couleur :</strong> Utilisez le bouton "Couleur" pour changer la couleur des ar√™tes s√©lectionn√©es ou
        futures.
      </p>
    </div>
  </dialog>

  <script src="niveau1.js"></script>
  <script src="niveau2.js"></script>
  <script src="niveau3.js"></script>
  <script src="niveau4.js"></script>
  <script src="niveau5.js"></script>
  <script src="niveau6.js"></script>
  <script src="script.js"></script>

</body>

</html>