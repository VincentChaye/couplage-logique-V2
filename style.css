:root{
  /* Palette moderne et dynamique */
  --bg:#f8fafc;          /* fond général très clair */
  --panel:#ffffff;       /* cartes/panneaux */
  --panel2:#f9fafb;      /* variante carte légèrement teintée */
  --text:#1e293b;        /* gris foncé moderne */
  --muted:#64748b;       /* gris moyen */
  --accent:#3b82f6;      /* bleu vif principal */
  --accent-hover:#2563eb;/* bleu foncé au survol */
  --accent-2:#60a5fa;    /* bleu clair pour focus/selection */
  --success:#16a34a;     /* vert pour arêtes valides */
  --border:#e2e8f0;      /* bordure cartes */
  --shadow: 0 1px 3px rgba(0,0,0,0.06);
  --shadow-lg: 0 4px 12px rgba(0,0,0,0.08);
}

*{box-sizing:border-box}
body{
  margin:0;
  font-family: 'Segoe UI', Inter, system-ui, -apple-system, sans-serif;
  color:var(--text);
  background:var(--bg);
  line-height:1.6;
}

.grid{
  display:grid;
  /* Était: 100px 1fr → passe à auto 1fr pour que la zone 3 grandisse avec le contenu */
  grid-template-rows: auto 1fr;
  grid-template-columns: 1fr 400px;
  gap: 12px;
  min-height: 100vh;
  padding: 12px;
}

/* Zone 3 (consignes en haut, style carte blanche) */
header#zone-3{
  grid-column: 1 / -1;
  background:var(--panel);
  border:1px solid var(--border);
  border-radius:16px;
  padding:18px 24px;
  position:relative;
  display:flex;
  /* Était: align-items:center → pour s’agrandir selon le contenu */
  align-items:flex-start;
  justify-content:space-between;
}
header h1{
  font-size:22px; margin:0 0 6px 0; color:var(--text);
}
header p{
  margin:0; color:var(--muted); line-height:1.35;
  /* Evite tout débordement si un long mot/lien apparaît */
  overflow-wrap:anywhere;
}

/* Zone 4 : bouton Info */
#zone-4{ position:absolute; right:16px; top:16px; }
.info-btn{
  width:42px; 
  height:42px; 
  border-radius:12px;
  border:1px solid var(--accent);
  background:var(--accent); 
  color:#fff; 
  font-weight:700; 
  font-size: 18px;
  cursor:pointer;
  transition: all 0.2s ease;
  box-shadow: 0 2px 6px rgba(59, 130, 246, 0.2);
}
.info-btn:hover{ 
  transform: translateY(-2px); 
  background: var(--accent-hover);
  box-shadow: 0 4px 10px rgba(59, 130, 246, 0.3);
}

/* Zone 1 (graphe) */
#zone-1{
  background:var(--panel);
  border:1px solid var(--border);
  border-radius:16px; 
  padding:12px; 
  min-height: 480px; 
  position:relative;
  box-shadow: var(--shadow);
  transition: box-shadow 0.2s ease;
}
#zone-1:hover{
  box-shadow: var(--shadow-lg);
}
#cy{
  position:absolute; inset:12px;
  border-radius:12px; 
  background:#fafafa;
  border: 2px solid var(--border);
}

/* Zone 2 (panneau boutons) */
#zone-2{
  background:var(--panel);
  border:1px solid var(--border);
  border-radius:16px; 
  padding:20px; 
  min-height: 480px;
  display:flex; 
  flex-direction:column; 
  gap:16px;
  box-shadow: var(--shadow);
}
.card{
  background:var(--panel2);
  border:1px solid var(--border);
  border-radius:14px; 
  padding:16px;
  transition: all 0.2s ease;
}
.card:hover{
  border-color: var(--accent-2);
  box-shadow: var(--shadow);
}
.card h3{
  color: var(--text);
  font-weight: 600;
  font-size: 15px;
}
.row{ 
  display:flex; 
  gap:10px; 
  flex-wrap:wrap; 
  align-items:center; 
}
.gap-sm > * { margin-right: 6px; }
label{
  color:var(--muted); 
  font-weight:500; 
  font-size:14px;
}
select, button{
  background:#ffffff; 
  color:var(--text);
  border:1px solid var(--border); 
  border-radius:10px;
  padding:10px 14px; 
  font-size:14px;
  cursor: pointer;
  transition: all 0.15s ease;
  font-weight: 500;
}
select:hover, button:not(:disabled):hover{
  border-color: var(--accent-2);
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}
button.primary{ 
  background:var(--accent); 
  color:#fff; 
  font-weight:600; 
  border:1px solid var(--accent);
  box-shadow: 0 2px 4px rgba(59, 130, 246, 0.2);
}
button.primary:hover:not(:disabled){ 
  background:var(--accent-hover);
  border-color: var(--accent-hover);
  box-shadow: 0 4px 8px rgba(59, 130, 246, 0.3);
  transform: translateY(-1px);
}
button.ghost{ 
  background:#ffffff;
  border: 1px solid var(--border);
}
button.ghost:hover:not(:disabled){
  background: var(--panel2);
  border-color: var(--accent-2);
}
button:active:not(:disabled){
  transform: scale(0.98);
}
button:disabled{ 
  opacity:.5; 
  cursor:not-allowed; 
}
.hint{ 
  font-size:13px; 
  color:var(--muted); 
  line-height: 1.5;
}

/* Helpers */
.hidden{ display:none !important; }

/* Responsive */
@media (max-width: 980px){
  /* Était: 120px auto auto → passe à auto auto auto pour laisser la consigne s’adapter */
  .grid{grid-template-rows: auto auto auto; grid-template-columns: 1fr;}
  #zone-1{ order:1 } #zone-2{ order:2 }
}

/* Modale */
dialog#help{
  width:min(720px, 94vw);
  border:1px solid var(--border); 
  border-radius:18px;
  padding:0; 
  background:var(--panel);
  box-shadow: 0 20px 40px rgba(0,0,0,0.15);
}
dialog::backdrop{ 
  background:rgba(0,0,0,.45);
  backdrop-filter: blur(2px);
}
.modal-header{
  display:flex; 
  justify-content:space-between; 
  align-items:center;
  padding:20px 24px; 
  border-bottom:1px solid var(--border);
  background: linear-gradient(to bottom, #fafafa, #ffffff);
  border-radius:18px 18px 0 0;
}
.modal-header strong{
  font-size: 18px;
  color: var(--text);
}
.modal-body{ 
  padding:24px; 
  color:var(--text);
  line-height: 1.7;
}

/* Feedback 1er sommet cliqué */
.selected-node{
  border-color: var(--accent-2) !important;
  border-width: 4px !important;
}


/* --- Bandeau de réussite (Zone 3) --- */
.win-banner{
  margin-top:16px;
  padding:14px 18px;
  border:2px solid #86efac;   /* vert vif */
  background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
  color:#166534;              /* texte vert foncé */
  border-radius:14px;
  display:flex; 
  align-items:center; 
  justify-content:space-between; 
  gap:16px;
  box-shadow: 0 4px 12px rgba(34, 197, 94, 0.15);
  animation: slideIn 0.3s ease-out;
}
@keyframes slideIn{
  from { opacity: 0; transform: translateY(-10px); }
  to { opacity: 1; transform: translateY(0); }
}
.win-banner.hidden{ display:none; }
.win-banner .wb-content{ 
  display:flex; 
  align-items:center; 
  gap:10px;
  font-weight: 600;
}
.win-banner .wb-emoji{
  font-size: 24px;
}
.win-banner .wb-actions{ 
  display:flex; 
  gap:10px; 
}
